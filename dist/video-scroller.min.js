!function(t,i){"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?module.exports=i():t.VideoScroller=i()}(this,function(){var t={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return.5>t?2*t*t:-1+(4-2*t)*t},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return.5>t?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return.5>t?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return.5>t?16*t*t*t*t*t:1+16*--t*t*t*t*t}},i=function(i){if(this.options=i||{},!this.options.el)throw new Error("Missing video element ref.");this.transitionTime=this.options.transitionTime||2e3,this.easingFunction=this.options.easingFunction||t.easeOutQuint,this.invert=void 0!==this.options.invert?this.options.invert:!1,this.scrollTimeout=this.options.scrollTimeout||300,this.el=this.options.el,this.el.addEventListener("loadeddata",this.init.bind(this))};return i.prototype={init:function(){this.videoDuration=this.el.duration,window.addEventListener("scroll",this.onScroll.bind(this),!1),this.start(this.inView(this.el))},start:function(t){this.startTime=Date.now(),this.currentTime=this.el.currentTime,this.targetDuration=this.videoDuration*t-this.el.currentTime,this.intervalTimer||(this.intervalTimer=setInterval(this.loop.bind(this),50))},loop:function(){var t=(Date.now()-this.startTime)/this.transitionTime,i=this.easingFunction(t);t>=1||(this.el.currentTime=this.currentTime+this.targetDuration*i,this.el.pause())},inView:function(){var t=(document.body.scrollTop,window.innerHeight),i=this.el.getBoundingClientRect().top,n=(this.el.offsetHeight,i-t);n>0&&(n=0);var e=Math.abs(n)/(1.5*t);return this.invert||(e=1-e),e>1?1:0>e?0:e},inCenter:function(t){var i=(document.body.scrollTop,window.innerHeight),n=t.getBoundingClientRect().top,e=t.offsetHeight,s=n-i/2+e/2,o=Math.abs(s/(i/2));return o>1?1:0>o?0:o},onScroll:function(){this.isWaiting||(this.isWaiting=!0,setTimeout(function(){this.isWaiting=!1;var t=this.inView(this.el);void 0!==t&&this.start(t)}.bind(this),this.scrollTimeout))}},i});